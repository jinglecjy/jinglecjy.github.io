---
title: 两周一报10（20181228）
date: 2018-12-28 18:00:00
tags: 周报
category: weekly
---
### 一、12月行业动态
1. **微信小程序近期更新一览**  
  - 20181112起，小程序跳转小程序数量不可超过10个，且不支持动态修改   
  - 20190114起，获取用户位置信息时需填写用途说明，否则无法正常调用地理位置相关接口   
  - 20180114起，不再支持使用“提前发起授权接口”获取用户信息  
  - 从小程序基础库版本2.1.1或以上、及开发者工具1.02.1808300或以上开始，小程序支持npm安装第三方包     
     
2. **在App、微信、h5页面切换音频播放功能的兼容性问题**
  - 播放音频需要用户主动触发  
  - 多音频切换方法：  
  - 在多个audio标签之间切换。优点是使用方便，缺点是资源占用高；  
  - 将多个音频合并为一个文件，播放不同的音频选择相应时段。优点是兼容性好，缺点是比较繁琐；  
  - 应用切换到后台后再切换回来，音乐续播，在visiblityChange事件中触发   
  参考：https://jdc.jd.com/archives/212874
    
3. **轻量级移动web特效解决方案omi-transform**   
  - 描述：以修改DOM属性为代价，提供可编程性高的动效方案   
  - 优点：   
    - 使用matrix3d为最终输出DOM对象，硬件加速   
    - 可编程性高   
    - 轻量级   
    - 有原生版本和react版本，可与多种框架配合使用   
  - 参考：http://www.alloyteam.com/2018/11/13436/

 
### 二、本周项目
1. **【自测中】大黄蜂互动游戏**
  - iOS下Safari上滑切换音效失败   
  audio.play()在Safari下只能写在touchstart事件才能生效   
     
  - Android下站内偶现视频解析异常   
  目前没有发现原因，抓包返回也正常，过了一段时间突然就好了，猜测是服务器问题   

  - 黑屏是音乐还会继续播放的问题   
  黑屏时需要特殊处理，关闭声音并且若有视频则暂停视频，通过visibilityChange事件触发   
  
  - 网速慢的时候视频加载时间很长   
  目前无解，只能够添加提示文案【正在加载…】，缓解一下这个问题