---
title: 两周一报08（20181130）
date: 2018-11-30 18:00:00
tags: 周报
category: weekly
---
### 一、本周项目
1. **[待提测] 双十二主会场小院标签楼层**   
  - 进度：100%   
  - 问题：上游接口还在测试中，接口未上线影响提测进度。   


2. **[进行中] 测试机管理小程序**   
  - 描述：通过扫描每个手机专有的二维码借取/归还部门内测试机，提供个人手机及凹凸实验室测试机信息查询。
  - 进度： 80%
  - 问题：一开始没有想好完整的交互模式，导致一边做一边改，影响效率

### 二、小程序云开发踩坑总结
1. **问题整理**
  - 云开发数据库无法联表查询，导致每次查询手机列表都要同时取出三个表的数据，再进行处理，拉取数据十分耗时。小程序云开发社区反馈后期会优化联表操作，建议目前采用添加冗余的方式来加快数据拉取。
  - 上传文件到小程序云开发服务器后，返回的是一个文件fileid，通过这个ID生成的图片链接有效期最长只有一天。
  - 为了前后端解耦，考虑将所有的数据库操作都放在了云函数中，由于功能不同导致云函数数量很多，对于复杂需求难以维护。
  - 小程序码生成的接口共有A/B/C三个，其中A/C有数量限制，只有B是不限数量，但是只能生成线上小程序的小程序码。

2. **总结**
  目前云开发的功能还比较简单，而且BUG较多，想要试水的话建议可以用一用云函数，方便代码复用，其他如云数据库，只支持简单的增删改查，稍微复杂的操作就会很吃力，而云存储给的权限比较吝啬，生成文件链接还需要根据文件ID再访问一次，链接有效期最长只有一天，用起来比较繁琐。